<!DOCTYPE html>
<html>
<head>

<meta name="viewport" content="width=624">

<title>MathQuill Demo</title>

<link rel="stylesheet" type="text/css" href="support/home.css">
<link rel="stylesheet" type="text/css" href="../build/mathquill.css">

<style type="text/css">
code span {
  font: 90% Verdana, sans-serif;
}
#codecogsimg {
  vertical-align: middle;
  border: none;
}
.mathquill-text-field {
  width: 100%;
}
#html-source {
  display: none;
  font-size: 90%;
  white-space: pre-wrap;
}
.mq-math-mode .mq-editable-field {
  min-width: 1cm;
}
</style>

</head>
<body>
<div id="body">

<a href="http://github.com/laughinghan/mathquill"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub!"></a>

<h1><a href="http://mathquill.github.com">MathQuill</a> Demo <small>local test page</small></h1>

<p>Math textbox with initial LaTeX: <span id="editable-math" class="mathquill-math-field">\frac{d}{dx}\sqrt{x}=</span></p>

<div id="demoBasic"></div>

<p><small>Try typing <code>1/2\sqrt x</code> and using the arrow keys to move around. Shortcut: use the tab key instead of arrow keys to get &quot;out&quot; of a command, like <code>a_n<span>[tab]</span>x^n</code>. Many LaTeX-style symbols and commands preceded by a backslash are supported, such as <code>\forall</code> or <code>n\choose k</code>.</small></p>

<p>Latex source: <textarea id="latex-source" style="width:80%;vertical-align:top"></textarea></p>

<p><button id="codecogs">Render LaTeX as an image with Code Cogs</button> <a id="codecogslink"><img id="codecogsimg" alt="LaTeX rendered as an image"> <span>Link</span></a></p>

<p><a href="javascript:;" id="show-html-source">Show Semantically Meaningful HTML Source</a></p>
<pre id="html-source"></pre>

<p>You could actually just copy-and-paste this HTML into any element with <code>class="mq-math-mode"</code> on a page that includes the <code>mathquill.css</code> and it would render beautifully, like this: <span class="mq-math-mode" id="html-transplant-example"></span></p>

<p>Any element with <code>class="mathquill-static-math"</code> whose contents are LaTeX source will be rendered as static math: <span class="mathquill-static-math">e^{i\pi}+1=0</span>. Note that if you're only rendering static math, <a href="http://mathjax.org">MathJax</a> supports more of LaTeX and renders better.</p>

<p>In many applications, such as a chat client, you probably type mostly normal text with some math interspersed, so there is also a MathQuill textbox that let's you type math between $'s: <span class="mathquill-text-field">The Quadratic Equation is $x=\frac{-b\pm\sqrt{b^2-4ac}}{2a}$</span></p>

<p>LaTeX math can also have textboxes inside: <span class="mathquill-static-math">\int\MathQuillMathField{}dx</span> or even <span class="mathquill-static-math">\sqrt{\MathQuillMathField{x^2+y^2}}</span></p>

<p>This button runs the JavaScript code written on it to MathQuill-ify the following <code>&lt;span&gt;</code> element into an editable math textbox: <button onclick="$(this).text('MathQuill(this.nextSibling).revert()'); MathQuill.MathField(this.nextSibling); var orig = arguments.callee; this.onclick = function(){ $(this).text('MathQuill.MathField(this.nextSibling)'); MathQuill(this.nextSibling).revert(); this.onclick = orig; };">MathQuill.MathField(this.nextSibling)</button><span>\frac{d}{dx}\sqrt{x} = \frac{d}{dx}x^{\frac{1}{2}} = \frac{1}{2}x^{-\frac{1}{2}} = \frac{1}{2\sqrt{x}}</span></p>

</div>
<script type="text/javascript" src="support/jquery-1.7.2.js"></script>
<script type="text/javascript" src="../build/mathquill.js"></script>
<script type="text/javascript">
//on document ready, mathquill-ify all `<tag class="mathquill-*">latex</tag>`
//elements according to their CSS class.
$(function() {
  $('.mathquill-static-math').each(function() { MathQuill.StaticMath(this); });
  $('.mathquill-math-field').each(function() { MathQuill.MathField(this); });
  $('.mathquill-text-field').each(function() { MathQuill.TextField(this); });

//Dropdown plugin data
var ddData = [
{ value:    1   , selected:false, latexSymbol:" \\alpha                 ",description:" lowercase alpha     "},
{ value:    2   , selected:false, latexSymbol:" \\beta                  ",description:" lowercase beta  "},
{ value:    3   , selected:false, latexSymbol:" \\gamma                 ",description:" lowercase gamma     "},
{ value:    4   , selected:false, latexSymbol:" \\delta                 ",description:" lowercase delta     "},
{ value:    5   , selected:false, latexSymbol:" \\epsilon               ",description:" lowercase epsilon   "},
{ value:    6   , selected:false, latexSymbol:" \\zeta                  ",description:" lowercase zeta  "},
{ value:    7   , selected:false, latexSymbol:" \\eta                   ",description:" lowercase eta   "},
{ value:    8   , selected:false, latexSymbol:" \\theta                 ",description:" lowercase theta     "},
{ value:    9   , selected:false, latexSymbol:" \\iota                  ",description:" lowercase iota  "},
{ value:    10  , selected:false, latexSymbol:" \\kappa                 ",description:" lowercase kappa     "},
{ value:    11  , selected:false, latexSymbol:" \\lambda                ",description:" lowercase lambda    "},
{ value:    12  , selected:false, latexSymbol:" \\mu                    ",description:" lowercase mu    "},
{ value:    13  , selected:false, latexSymbol:" \\nu                    ",description:" lowercase nu    "},
{ value:    14  , selected:false, latexSymbol:" \\xi                    ",description:" lowercase xi    "},
{ value:    15  , selected:false, latexSymbol:" \\omicron               ",description:" lowercase omicron   "},
{ value:    16  , selected:false, latexSymbol:" \\pi                    ",description:" lowercase pi    "},
{ value:    17  , selected:false, latexSymbol:" \\rho                   ",description:" lowercase rho   "},
{ value:    18  , selected:false, latexSymbol:" \\sigma                 ",description:" lowercase sigma     "},
{ value:    19  , selected:false, latexSymbol:" \\tau                   ",description:" lowercase tau   "},
{ value:    20  , selected:false, latexSymbol:" \\upsilon               ",description:" lowercase upsilon   "},
{ value:    21  , selected:false, latexSymbol:" \\phi                   ",description:" lowercase phi   "},
{ value:    22  , selected:false, latexSymbol:" \\chi                   ",description:" lowercase chi   "},
{ value:    23  , selected:false, latexSymbol:" \\psi                   ",description:" lowercase psi   "},
{ value:    24  , selected:false, latexSymbol:" \\omega                 ",description:" lowercase omega     "},
{ value:    25  , selected:false, latexSymbol:" \\Alpha                 ",description:" capital alpha   "},
{ value:    26  , selected:false, latexSymbol:" \\Beta                  ",description:" capital beta    "},
{ value:    27  , selected:false, latexSymbol:" \\gamma                 ",description:" capital gamma   "},
{ value:    28  , selected:false, latexSymbol:" \\Delta                 ",description:" capital delta   "},
{ value:    29  , selected:false, latexSymbol:" \\Epsilon               ",description:" capital epsilon     "},
{ value:    30  , selected:false, latexSymbol:" \\Zeta                  ",description:" capital zeta    "},
{ value:    31  , selected:false, latexSymbol:" \\Eta                   ",description:" capital eta     "},
{ value:    32  , selected:false, latexSymbol:" \\Theta,                ",description:" capital theta   "},
{ value:    33  , selected:false, latexSymbol:" \\Iota                  ",description:" capital iota    "},
{ value:    34  , selected:false, latexSymbol:" \\Kappa,                ",description:" capital kappa   "},
{ value:    35  , selected:false, latexSymbol:" \\Lambda                ",description:" capital lambda  "},
{ value:    36  , selected:false, latexSymbol:" \\Mu                    ",description:" capital mu  "},
{ value:    37  , selected:false, latexSymbol:" \\Nu                    ",description:" capital nu  "},
{ value:    38  , selected:false, latexSymbol:" \\Xi                    ",description:" capital xi  "},
{ value:    39  , selected:false, latexSymbol:" \\omicron               ",description:" capital omicron     "},
{ value:    40  , selected:false, latexSymbol:" \\Pi                    ",description:" capital pi  "},
{ value:    41  , selected:false, latexSymbol:" \\Rho                   ",description:" capital rho     "},
{ value:    42  , selected:false, latexSymbol:" \\Sigma                 ",description:" capital sigma   "},
{ value:    43  , selected:false, latexSymbol:" \\Tau                   ",description:" capital tau     "},
{ value:    44  , selected:false, latexSymbol:" \\Upsilon               ",description:" capital upsilon     "},
{ value:    45  , selected:false, latexSymbol:" \\Phi                   ",description:" capital phi     "},
{ value:    46  , selected:false, latexSymbol:" \\Chi                   ",description:" capital chi     "},
{ value:    47  , selected:false, latexSymbol:" \\Psi                   ",description:" capital psi     "},
{ value:    48  , selected:false, latexSymbol:" \\Omega                 ",description:" capital omega   "},
{ value:    49  , selected:false, latexSymbol:" \\varepsilon            ",description:" varepsilon      "},
{ value:    50  , selected:false, latexSymbol:" \\vartheta              ",description:" vartheta    "},
{ value:    51  , selected:false, latexSymbol:" \\varkappa              ",description:" varkappa    "},
{ value:    52  , selected:false, latexSymbol:" \\varpi                 ",description:" varpi   "},
{ value:    53  , selected:false, latexSymbol:" \\varrho                ",description:" varrho  "},
{ value:    54  , selected:false, latexSymbol:" \\varsigma              ",description:" varsigma    "},
{ value:    55  , selected:false, latexSymbol:" \\varphi                ",description:" varphi      "},
{ value:    56  , selected:false, latexSymbol:" <                   ",description:" is less than    "},
{ value:    57  , selected:false, latexSymbol:" >                   ",description:" is greater than "},
{ value:    58  , selected:false, latexSymbol:" \\nless                 ",description:" is not less than        "},
{ value:    59  , selected:false, latexSymbol:" \\ngtr                  ",description:" is not greater than "},
{ value:    60  , selected:false, latexSymbol:" \\leq                   ",description:" is less than or equal to        "},
{ value:    61  , selected:false, latexSymbol:" \\geq                   ",description:" is greater than or equal to "},
{ value:    62  , selected:false, latexSymbol:" \\nleq                  ",description:" is neither less than nor equal to   "},
{ value:    63  , selected:false, latexSymbol:" \\ngeq                  ",description:" is neither greater than nor equal to    "},
{ value:    64  , selected:false, latexSymbol:" \\prec                  ",description:" precedes    "},
{ value:    65  , selected:false, latexSymbol:" \\succ                  ",description:" succeeds    "},
{ value:    66  , selected:false, latexSymbol:" \\nprec                 ",description:" doesn't precede "},
{ value:    67  , selected:false, latexSymbol:" \\nsucc                 ",description:" doesn't succeed "},
{ value:    68  , selected:false, latexSymbol:" \\preceq                ",description:" precedes or equals  "},
{ value:    69  , selected:false, latexSymbol:" \\succeq                ",description:" succeeds or equals  "},
{ value:    70  , selected:false, latexSymbol:" \\npreceq               ",description:" neither precedes nor equals "},
{ value:    71  , selected:false, latexSymbol:" \\nsucceq               ",description:" neither succeeds nor equals "},
{ value:    72  , selected:false, latexSymbol:" \\ll                    ",description:" much less than  "},
{ value:    73  , selected:false, latexSymbol:" \\gg                    ",description:" much greater than   "},
//{ value:    74  , selected:false, latexSymbol:" \\lll                   ",description:" much much less than?"},
//{ value:    75  , selected:false, latexSymbol:" \\ggg       ",description:"             much much greater than? "},
{ value:    76  , selected:false, latexSymbol:" \\subset                ",description:" is a proper subset of       "},
{ value:    77  , selected:false, latexSymbol:" \\supset                ",description:" is a proper superset of "},
{ value:    78  , selected:false, latexSymbol:" \\not\\subset           ",description:" is not a proper subset of       "},
{ value:    79  , selected:false, latexSymbol:" \\not\\supset           ",description:" is not a proper superset of "},
{ value:    80  , selected:false, latexSymbol:" \\subseteq              ",description:"    is a subset of      "},
{ value:    81  , selected:false, latexSymbol:" \\supseteq              ",description:" is a superset of    "},
{ value:    82  , selected:false, latexSymbol:" \\nsubseteq             ",description:" is not a subset of      "},
{ value:    83  , selected:false, latexSymbol:" \\nsupseteq             ",description:" is not a superset of    "},
{ value:    84  , selected:false, latexSymbol:" \\sqsubset              ",description:" sqsubset        "},
{ value:    85  , selected:false, latexSymbol:" \\sqsupset              ",description:" sqsupset        "},
{ value:    86  , selected:false, latexSymbol:" \\sqsubseteq            ",description:" sqsubseteq          "},
{ value:    87  , selected:false, latexSymbol:" \\sqsupseteq    ",description:" sqsupseteq  "},

    {
        value: 1,
        selected: false,
        description: "square root",
        latexSymbol: "\\sqrt{}"
    },
    {
        value: 2,
        selected: false,
        description: "fraction, horizontal bar, division",
        latexSymbol: "\\frac{}{}"

    },
    {
        value: 3,
        selected: true,
        description: "greater than or equal to, inequality",
        latexSymbol: "\\geq"

    },
    {
        value: 4,
        selected: false,
        description: "union, set, combine",
        latexSymbol: "\\cup"

    }
];

//ddslick init code
$('#demoBasic').ddslick({
    data: ddData,
    width: 300,
    imagePosition: "left",
    selectText: "Select your favorite social network",
    onSelected: function (data) {
        console.log(data);
    }
});

$('#show-html-source').toggle(function() {
  $(this).html('Hide Semantically Meaningful HTML Source').parent().next().show();
}, function() {
  $(this).html('Show Semantically Meaningful HTML Source').parent().next().hide();
});

var latexMath = $('#editable-math'), latexSource = $('#latex-source'), htmlSource = $('#html-source'), codecogsimg = $('#codecogsimg'), codecogslink = $('#codecogslink'), htmlTransplantExample = $('#html-transplant-example');

$('#codecogs').click(function() {
  var latex = latexSource.val();
  codecogslink.attr('href','http://latex.codecogs.com/gif.latex?'+latex);
  codecogsimg.attr('src','http://latex.codecogs.com/gif.latex?'+latex);
});

$(function() {
  var latexMath = MathQuill($('#editable-math')[0]);
  $(latexMath.el()).bind('keydown keypress', function() {
    setTimeout(function() {
      var latex = latexMath.latex();
      latexSource.val(latex);
//      location.hash = '#'+latex; //extremely performance-crippling in Chrome for some reason
      htmlSource.text(printTree(latexMath.html()));
      htmlTransplantExample.html(latexMath.html());
    });
  }).keydown();
  latexMath.focus();

  latexSource.bind('keydown keypress', function() {
    var oldtext = latexSource.val();
    setTimeout(function() {
      var newtext = latexSource.val();
      if(newtext !== oldtext) {
        latexMath.latex(newtext);
        htmlSource.text(printTree(latexMath.html()));
        htmlTransplantExample.html(latexMath.html());
      }
    });
  });

  if(location.hash && location.hash.length > 1)
    latexMath.latex(decodeURIComponent(location.hash.slice(1))).focus();
});

//print the HTML source as an indented tree. TODO: syntax highlight
function printTree(html) {
  html = html.match(/<[a-z]+|<\/[a-z]+>|./ig);
  if (!html) return '';
  var indent = '\n', tree = [];
  for (var i = 0; i < html.length; i += 1) {
    var token = html[i];
    if (token.charAt(0) === '<') {
      if (token.charAt(1) === '/') { //dedent on close tag
        indent = indent.slice(0,-2);
        if (html[i+1] && html[i+1].slice(0,2) === '</') //but maintain indent for close tags that come after other close tags
          token += indent.slice(0,-2);
      }
      else { //indent on open tag
        tree.push(indent);
        indent += '  ';
      }

      token = token.toLowerCase();
    }

    tree.push(token);
  }
  return tree.join('').slice(1);
}
</script>
</body>
</html>
